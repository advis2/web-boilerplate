(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,66484,e=>{"use strict";var t=e.i(62633),r=e.i(81784);let n=[[0,1],[1,0],[0,-1],[-1,0],[1,1],[1,-1],[-1,1],[-1,-1]];function i(){let e=Array.from({length:8},()=>Array(8).fill(null));return e[3][3]="W",e[4][4]="W",e[3][4]="B",e[4][3]="B",e}function l({value:e,flipping:r}){return e?(0,t.jsx)("div",{style:{width:35,height:35,perspective:600},children:(0,t.jsxs)("div",{style:{width:"100%",height:"100%",borderRadius:"50%",transformStyle:"preserve-3d",transition:r?"transform 1000ms cubic-bezier(.22,.61,.36,1)":"none",transform:r?"rotateY(180deg)":"rotateY(0deg)"},children:[(0,t.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",borderRadius:"50%",background:"B"===e?"black":"white",backfaceVisibility:"hidden"}}),(0,t.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",borderRadius:"50%",background:"B"===e?"white":"black",transform:"rotateY(180deg)",backfaceVisibility:"hidden"}})]})}):null}e.s(["default",0,function(){let[o,s]=(0,r.useState)(i()),[a,c]=(0,r.useState)(i()),[u,d]=(0,r.useState)("B"),[h,p]=(0,r.useState)(!1),[b,f]=(0,r.useState)(""),[m,g]=(0,r.useState)("B"),[j,y]=(0,r.useState)(!1),B=(0,r.useRef)(null),x=(0,r.useRef)(null),k=e=>"B"===e?"W":"B",v=(e,t,r,i)=>{if(null!==e[t][r])return!1;let l=k(i);return n.some(([n,o])=>{let s=t+n,a=r+o,c=!1;for(;s>=0&&s<8&&a>=0&&a<8&&e[s][a]===l;)s+=n,a+=o,c=!0;return c&&s>=0&&s<8&&a>=0&&a<8&&e[s][a]===i})},w=(0,r.useMemo)(()=>{let e=0,t=0;return o.forEach(r=>r.forEach(r=>{"B"===r&&e++,"W"===r&&t++})),{black:e,white:t}},[o]);(0,r.useEffect)(()=>{e.A(70681).then(({Peer:e})=>{let t=new e("",{host:"0.peerjs.com",port:443,path:"/",secure:!0});x.current=t,t.on("open",e=>{f(e),console.log("My Peer ID:",e)}),t.on("connection",e=>{B.current=e,y(!0),g("W"),e.on("data",e=>{e.board&&e.turn&&(s(e.board),c(e.board),d(e.turn)),e.role&&g("B"===e.role?"W":"B")}),e.on("close",()=>{y(!1)})})})},[]);let[S,C]=(0,r.useState)(new Set),W=((e,t)=>{let r=[];for(let n=0;n<8;n++)for(let i=0;i<8;i++)v(e,n,i,t)&&r.push([n,i]);return r})(o,u);return(0,t.jsxs)("div",{style:{padding:20},children:[(0,t.jsx)("h1",{children:"Othello P2P"}),(0,t.jsxs)("p",{children:["My Peer ID: ",b]}),(0,t.jsxs)("p",{children:["Status: ",j?"Connected ✅":"Not connected ❌"]}),!j&&(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"text",placeholder:"Peer ID to connect",id:"peer-id-input"}),(0,t.jsx)("button",{onClick:()=>{(e=>{if(!x.current||b===e)return;let t=x.current.connect(e);B.current=t,g("B"),d("B"),t.on("open",()=>y(!0)),t.on("open",()=>{t.send({role:"B"})}),t.on("data",e=>{e.board&&e.turn&&(s(e.board),c(e.board),d(e.turn))}),t.on("close",()=>y(!1))})(document.getElementById("peer-id-input").value)},children:"Connect"})]}),h?(0,t.jsxs)("h2",{children:["Game Over —",w.black>w.white&&" Black Wins",w.white>w.black&&" White Wins",w.white===w.black&&" Draw"]}):(0,t.jsxs)("p",{children:["Turn: ","B"===u?"Black ⚫":"White ⚪ (AI)"]}),(0,t.jsxs)("p",{children:["⚫ ",w.black," : ⚪ ",w.white]}),(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 50px)",gap:2,justifyContent:"center",marginTop:20},children:a.map((e,r)=>e.map((e,i)=>{let a=W.some(([e,t])=>e===r&&t===i);return(0,t.jsx)("div",{onClick:()=>((e,t)=>{let r,i;if(h||u!==m||!v(o,e,t,u))return;let l=((r=o.map(e=>[...e]))[e][t]=u,i=k(u),n.forEach(([n,l])=>{let o=e+n,s=t+l,a=[];for(;o>=0&&o<8&&s>=0&&s<8&&r[o][s]===i;)a.push([o,s]),o+=n,s+=l;o>=0&&o<8&&s>=0&&s<8&&r[o][s]===u&&a.forEach(([e,t])=>r[e][t]=u)}),r);s(l),B.current&&j&&B.current.send({board:l,turn:k(u)});let a=new Set;for(let e=0;e<8;e++)for(let t=0;t<8;t++)o[e][t]&&o[e][t]!==l[e][t]&&a.add(`${e}-${t}`);C(a),setTimeout(()=>{c(l),C(new Set),d(k(u))},700)})(r,i),style:{width:50,height:50,background:u===m&&a?"#66bb6a":"#2e7d32",display:"flex",alignItems:"center",justifyContent:"center",cursor:u===m&&a?"pointer":"default"},children:(0,t.jsx)(l,{value:e,flipping:S.has(`${r}-${i}`)})},`${r}-${i}`)}))}),(0,t.jsx)("button",{onClick:()=>{let e=i();s(e),c(e),d("B"),p(!1),B.current&&j&&B.current.send({board:e,turn:"B"})},style:{marginTop:20},children:"Reset Game"})]})}],66484)},70681,e=>{e.v(t=>Promise.all(["static/chunks/631464976447247a.js"].map(t=>e.l(t))).then(()=>t(60725)))}]);